/**
 * SidebarPet 样式
 *
 * 设计要点：
 * - 紫色渐变与主题协调
 * - 呼吸效果动画（待机状态）
 * - 眼睛发光效果（激活状态）
 * - 抖动动画（兴奋状态）
 */

.sidebar-pet {
  position: fixed;
  width: 16px;
  height: 56px;
  cursor: pointer;
  z-index: 100;
  transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  /* 默认呼吸动画 */
  animation: petBreathing 3s ease-in-out infinite;
}

.sidebar-pet:hover {
  transform: scale(1.1);
}

.sidebar-pet:focus {
  outline: none;
}

.sidebar-pet:focus-visible {
  outline: 2px solid #8b5cf6;
  outline-offset: 2px;
  border-radius: 8px;
}

/* 主体 - 在紫色线条右侧 */
.pet-body {
  width: 100%;
  height: 100%;
  background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
  border-radius: 0 8px 8px 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  box-shadow:
    0 0 12px rgba(139, 92, 246, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  /* 左边缘与紫色线条连接 */
  border-left: 2px solid rgba(139, 92, 246, 0.6);
}

/* 眼睛 */
.pet-eye {
  width: 6px;
  height: 6px;
  background: rgba(255, 255, 255, 0.5);
  border-radius: 50%;
  transition: all 0.2s ease;
}

/* === 状态样式 === */

/* 待机状态 - 呼吸动画 */
.sidebar-pet.idle .pet-body {
  opacity: 0.85;
}

/* 激活状态 - 眼睛变亮 */
.sidebar-pet.active .pet-eye,
.sidebar-pet.following .pet-eye {
  background: #ffffff;
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.6);
}

.sidebar-pet.active .pet-body,
.sidebar-pet.following .pet-body {
  box-shadow:
    0 0 16px rgba(139, 92, 246, 0.5),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

/* 兴奋状态 - 眼睛抖动 + 发光增强 */
.sidebar-pet.excited .pet-eye {
  background: #ffffff;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
  animation: petEyeShake 0.1s linear infinite;
}

.sidebar-pet.excited .pet-body {
  box-shadow:
    0 0 20px rgba(139, 92, 246, 0.6),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

/* === 动画定义 === */

/* 呼吸效果 */
@keyframes petBreathing {
  0%, 100% {
    opacity: 0.8;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.02);
  }
}

/* 眼睛抖动 */
@keyframes petEyeShake {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-1px);
  }
  75% {
    transform: translateX(1px);
  }
}

/* === 悬停反馈 === */

.sidebar-pet:hover .pet-body {
  box-shadow:
    0 0 20px rgba(139, 92, 246, 0.5),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.sidebar-pet:hover .pet-eye {
  background: rgba(255, 255, 255, 0.8);
}

/* === 点击反馈 === */

.sidebar-pet:active {
  transform: scale(0.95);
}

.sidebar-pet:active .pet-body {
  box-shadow:
    0 0 8px rgba(139, 92, 246, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* === 侧边栏折叠状态 - 宠物更透明 === */

.sidebar-pet.sidebar-collapsed {
  /* 覆盖默认呼吸动画，使用低透明度版本 */
  animation: petBreathingFaded 3s ease-in-out infinite;
  transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.sidebar-pet.sidebar-collapsed:hover {
  animation: none;
  opacity: 0.6;
}

.sidebar-pet.sidebar-collapsed.active,
.sidebar-pet.sidebar-collapsed.following,
.sidebar-pet.sidebar-collapsed.excited {
  animation: none;
  opacity: 0.7;
}

/* 折叠状态的低透明度呼吸动画 */
@keyframes petBreathingFaded {
  0%, 100% {
    opacity: 0.15;
    transform: scale(1);
  }
  50% {
    opacity: 0.25;
    transform: scale(1.02);
  }
}
